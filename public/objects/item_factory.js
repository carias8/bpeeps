// Generated by CoffeeScript 1.4.0
(function() {
  var CHANCE_OF_ITEM_IN_BLOCK, ITEMS;

  CHANCE_OF_ITEM_IN_BLOCK = 1;

  ITEMS = [this.PowerPlusItem, this.PowerMinusItem];

  this.ItemFactory = {
    roll_for_item: function(position) {
      if (Math.random() < CHANCE_OF_ITEM_IN_BLOCK) {
        return this.random_item(position);
      } else {
        return null;
      }
    },
    random_item: function(position) {
      var item, last_item, roll, sum_weights, _i, _j, _len, _len1;
      sum_weights = 0;
      for (_i = 0, _len = ITEMS.length; _i < _len; _i++) {
        item = ITEMS[_i];
        sum_weights += item.weight;
      }
      roll = Math.random() * sum_weights;
      last_item = false;
      for (_j = 0, _len1 = ITEMS.length; _j < _len1; _j++) {
        item = ITEMS[_j];
        last_item = item;
        roll -= item.weight;
        if (roll < 0) {
          break;
        }
      }
      return new last_item(position);
    }
  };

}).call(this);
